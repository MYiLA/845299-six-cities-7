{"version":3,"sources":["const.ts","utils/adapters/adapt-hotels.ts","utils/adapters/adapt-comments.ts","utils/adapters/adapt-login.ts","services/rtk-api.ts","store/reducer.ts","utils/common.ts","hooks/selectors/use-login.ts","components/features/header-view.tsx","components/features/error-message.tsx","components/features/header.tsx","components/features/bookmark/bookmark-view.tsx","components/features/bookmark/bookmark.tsx","components/features/bookmark/bookmark-place-card.tsx","components/features/card/card.tsx","components/features/card/card-cities.tsx","hooks/useMap.tsx","components/features/map.tsx","components/features/sorting-dropdown-btn.tsx","components/features/sorting-dropdown.tsx","components/features/offers-list.tsx","components/features/cities-list.tsx","components/features/spinner.tsx","components/features/offers-list-empty.tsx","components/pages/main-view.tsx","components/pages/not-found.tsx","hooks/selectors/use-is-empty.ts","utils/sorting.ts","hooks/selectors/use-current-hotels.ts","components/pages/main.tsx","hooks/selectors/use-cities-list.ts","components/features/footer.tsx","hooks/selectors/use-favorites-hotels.ts","components/features/card/card-favorites.tsx","components/features/offers-list-locations.tsx","components/features/offers-list-locations-empty.tsx","components/pages/favorites.tsx","hooks/selectors/use-hotel.ts","components/features/card/card-near-places.tsx","hooks/selectors/use-comments-list.ts","components/features/comment-new-view.tsx","components/features/comment-new.tsx","components/features/comment.tsx","components/features/comments-list-view.tsx","components/features/comments-list.tsx","components/features/bookmark/bookmark-property.tsx","components/features/host-view.tsx","components/pages/room-view.tsx","components/pages/room.tsx","components/pages/sign-in.tsx","components/features/private-route.tsx","components/app/app.tsx","index.tsx"],"names":["CommentOptions","AppRoute","ApiRoute","CardType","BookmarkType","itemToHotel","item","hotel","host","avatarUrl","avatar_url","id","isPro","is_pro","name","isFavorite","is_favorite","isPremium","is_premium","maxAdults","max_adults","previewImage","preview_image","adaptHotelsToClient","data","Array","isArray","Error","map","adaptHotelIdToClient","constructor","adaptCommentsToClient","user","itemToComment","adaptLoginToClient","login","itemToLogin","MESSAGE_DISPLAY_TIME","STARS","MESSAGE_NOT_INTERNET","RegularExpression","EMAIL","ONE_SIMBOL","SortingType","POPULAR","path","PRICE_LOW_TO_HIGH","PRICE_HIGH_TO_LOW","TOP_RATED_FIRST","api","createApi","baseQuery","baseArg","real","fetchBaseQuery","args","extraOptions","signal","dispatch","getState","customController","AbortController","customSignal","addEventListener","abort","setTimeout","customFetchBaseQuery","baseUrl","prepareHeaders","headers","token","sessionStorage","getItem","set","tagTypes","endpoints","builder","getHotels","query","HOTELS","providesTags","transformResponse","getHotelId","getHotelIdNearby","getFavorites","FAVORITE","postFavoriteStatus","mutation","status","url","method","invalidatesTags","getComments","COMMENTS","postComment","body","getLogin","LOGIN","postLogin","deleteLogout","LOGOUT","usePostFavoriteStatusMutation","reducer","reducerPath","usePostCommentMutation","useGetLoginQuery","usePostLoginMutation","сities","location","latitude","longitude","zoom","store","configureStore","cities","middleware","getDefaultMiddleware","concat","HOMEPAGE","getRating","part","Math","round","getRoute","target","MAIN","OFFER","useLogin","isAuth","authorized","useQuery","isLoading","refetch","HeaderView","params","avatarStyles","email","onSignOut","className","to","DEFAULT_CITY","src","alt","width","height","FAVORITES","style","href","onClick","ErrorMessage","text","Header","useMutation","useState","isShowError","setIsShowError","useCallback","evt","preventDefault","unwrap","catch","finally","removeItem","backgroundImage","BookmarkView","onSetFavorite","type","xlinkHref","defaultStyle","PROPERTY","Bookmark","history","useHistory","favoriteStatus","push","PLACE_CARD","BookmarkPlaceCard","imgSizeDefault","Card","cardData","cardType","CITIES","children","imgSize","onMouseEnter","onMouseLeave","price","rating","title","role","CardCities","useMap","mapRef","city","setMap","useEffect","instance","leaflet","center","lat","lng","tileLayer","attribution","addTo","pin","icon","iconUrl","iconSize","iconAnchor","pinActive","markers","Map","selectedPoint","activeCity","hotels","useRef","current","forEach","marker","remove","point","flyTo","latLng","animate","duration","easeLinearity","ref","SortingDropdownBtn","sortType","activeSortType","tabIndex","onKeyDown","ev","key","SortingDropdown","useParams","sorting","isOpen","setIsOpen","sortingArr","Object","values","find","sort","action","sortTypeName","OffersList","activeCard","setActiveCard","length","undefined","CitiesList","Spinner","OffersListEmpty","activeCityName","MainView","isEmpty","display","xmlns","viewBox","fillRule","clipRule","d","NotFound","useIsEmpty","some","sortByPriceHighToLow","hotel1","hotel2","sortByPriceLowToHigh","sortByRatedFirst","useCurrentHotels","sortingType","isError","activeHotels","filter","Main","useSelector","state","selectSityList","shallowEqual","Footer","useFavoritesHotels","OffersListLocations","locationHotels","reduce","acc","cityName","entries","OffersListLocationsEmpty","Favorites","useHotel","Number","isLoadingHotel","NEAR_PLACES","useCommentsList","hotelId","comments","CommentNewView","onSubmit","onChange","setRating","isFormDisabled","comment","setComment","isSubmitDisabled","htmlFor","star","defaultValue","checked","disabled","placeholder","value","CommentNew","setIsSubmitDisabled","setIsFormDisabled","MIN_LENGTH","MAX_LENGTH","isValidComment","then","Comment","commentData","date","dateTime","dayjs","format","CommentsListView","commentsTotal","shownComments","CommentsList","comment1","comment2","date1","date2","diff","slice","BookmarkProperty","HostView","RoomView","hotelType","images","bedrooms","goods","description","hotelsInMap","image","Room","SignIn","message","success","emailCheck","setEmailCheck","passwordCheck","setPasswordCheck","formData","FormData","currentTarget","password","test","checkedFormData","get","setItem","required","PrivateRoute","authPath","routeProps","pathname","App","exact","render","document","getElementById"],"mappings":"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","file":"static/js/main.bee8433b.chunk.js","sourcesContent":["export const MAX_IMAGES_IN_ROOM_PAGE = 6;\nexport const MESSAGE_DISPLAY_TIME = 5000;\nexport const STARS = [5, 4, 3, 2, 1];\nexport const MESSAGE_NOT_INTERNET = 'Проверьте интернет-соединение и перезагрузите страницу.';\n\nexport enum CommentOptions {\n  MIN_LENGTH = 50,\n  MAX_LENGTH = 300,\n}\n\nexport enum AppRoute {\n  MAIN = 'main',\n  LOGIN = 'login',\n  FAVORITES = 'favorites',\n  OFFER = 'offer',\n  DEFAULT_CITY = 'Paris'\n}\n\nexport enum ApiRoute {\n  HOTELS = '/hotels',\n  FAVORITE = '/favorite',\n  COMMENTS = '/comments',\n  LOGIN = '/login',\n  LOGOUT = '/logout',\n}\n\nexport enum CardType {\n  FAVORITES = 'favorites',\n  CITIES = 'cities',\n  NEAR_PLACES = 'near-places'\n}\n\nexport enum BookmarkType {\n  PROPERTY = 'property',\n  PLACE_CARD = 'place-card',\n}\n\nexport const RegularExpression = {\n  EMAIL: /^[^\\s@]{3,}@[^\\s@]{2,}\\.[^\\s@]{2,}$/,\n  ONE_SIMBOL: /\\S/,\n};\n\nexport const SortingType = {\n  POPULAR: {\n    name: 'Popular',\n    path: 'popular',\n  },\n  PRICE_LOW_TO_HIGH: {\n    name: 'Price: low to high',\n    path: 'price-low-to-high',\n  },\n  PRICE_HIGH_TO_LOW: {\n    name: 'Price: high to low',\n    path: 'price-high-to-low',\n  },\n  TOP_RATED_FIRST: {\n    name: 'Top rated first',\n    path: 'top-rated-first',\n  },\n};\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { ServerResponse } from 'http';\nimport { Hotel } from '../../data-type';\n\nconst itemToHotel = (item: any): Hotel => {\n  const hotel = {\n    ...item,\n    host: {\n      avatarUrl: item.host.avatar_url,\n      id: item.host.id,\n      isPro: item.host.is_pro,\n      name: item.host.name,\n    },\n    isFavorite: item.is_favorite,\n    isPremium: item.is_premium,\n    maxAdults: item.max_adults,\n    previewImage: item.preview_image,\n  };\n\n  delete hotel.is_favorite;\n  delete hotel.is_premium;\n  delete hotel.max_adults;\n  delete hotel.preview_image;\n\n  return hotel;\n};\n\nexport const adaptHotelsToClient = (data: ServerResponse): Hotel[] => {\n  if (!Array.isArray(data)) {\n    throw new Error('Пришли подозрительные данные с сервера. Это НЕ список отелей');\n  }\n\n  return data.map((item) => itemToHotel(item));\n};\n\nexport const adaptHotelIdToClient = (data: ServerResponse): Hotel => {\n  if (data.constructor.name !== 'Object') {\n    throw new Error('Пришли подозрительные данные с сервера. Это НЕ отель');\n  }\n\n  return itemToHotel(data);\n};\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { ServerResponse } from 'http';\nimport { CommentGet } from '../../data-type';\n\nconst itemToComment = (item: any): CommentGet => {\n  const comment = {\n    ...item,\n    user: {\n      avatarUrl: item.user.avatar_url,\n      id: item.user.id,\n      isPro: item.user.is_pro,\n      name: item.user.name,\n    },\n  };\n\n  return comment;\n};\n\nconst adaptCommentsToClient = (data: ServerResponse): CommentGet[] => {\n  if (!Array.isArray(data)) {\n    throw new Error('Пришли подозрительные данные с сервера. Это НЕ список комментариев');\n  }\n\n  return data.map((item) => itemToComment(item));\n};\n\nexport default adaptCommentsToClient;\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { ServerResponse } from 'http';\nimport { LoginGet } from '../../data-type';\n\nconst itemToLogin = (item: any): LoginGet => {\n  const login = {\n    ...item,\n    avatarUrl: item.avatar_url,\n    isPro: item.is_pro,\n  };\n\n  delete login.avatar_url;\n  delete login.is_pro;\n\n  return login;\n};\n\nconst adaptLoginToClient = (data: ServerResponse): LoginGet => {\n  if (data.constructor.name !== 'Object') {\n    throw new Error('Пришли подозрительные данные с сервера. Это НЕ логин');\n  }\n\n  return itemToLogin(data);\n};\n\nexport default adaptLoginToClient;\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { BaseQueryFn, createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react';\nimport {\n  FetchArgs, FetchBaseQueryArgs, FetchBaseQueryError, FetchBaseQueryMeta\n} from '@reduxjs/toolkit/dist/query/fetchBaseQuery';\nimport {\n  LoginGet, CommentGet, Hotel, LoginPost, CommentPost\n} from '../data-type';\nimport { adaptHotelsToClient, adaptHotelIdToClient } from '../utils/adapters/adapt-hotels';\nimport adaptCommentsToClient from '../utils/adapters/adapt-comments';\nimport adaptLoginToClient from '../utils/adapters/adapt-login';\nimport { ApiRoute } from '../const';\n\nconst BACKEND_URL = 'https://7.react.pages.academy/six-cities';\nconst REQUEST_TIMEOUT = 5000;\n\ntype FetchBaseQuery = (p?: FetchBaseQueryArgs) => BaseQueryFn<string | FetchArgs,\nunknown, FetchBaseQueryError, Record<string, unknown>, FetchBaseQueryMeta>;\n\nconst customFetchBaseQuery: FetchBaseQuery = (baseArg) => {\n  const real = fetchBaseQuery(baseArg);\n\n  const result: BaseQueryFn<string | FetchArgs, unknown,\n  FetchBaseQueryError, Record<string, unknown>, FetchBaseQueryMeta> = (args, api, extraOptions) => {\n    const { signal, dispatch, getState } = api;\n    const customController = new AbortController();\n    const customSignal = customController.signal;\n\n    signal.addEventListener('abort', () => customController.abort());\n    setTimeout(() => { customController.abort(); }, REQUEST_TIMEOUT);\n\n    return real(args, { signal: customSignal, dispatch, getState }, extraOptions);\n  };\n\n  return result;\n};\n\nexport const api = createApi({\n  baseQuery: customFetchBaseQuery({\n    baseUrl: BACKEND_URL,\n    prepareHeaders: (headers) => {\n      const token = sessionStorage.getItem('token') ?? '';\n\n      if (token) {\n        headers.set('X-Token', token);\n      }\n\n      return headers;\n    },\n  }),\n  tagTypes: ['favorite', 'comment'],\n  endpoints: (builder) => ({\n    getHotels: builder.query<Hotel[], void>({\n      query: () => ApiRoute.HOTELS,\n      providesTags: ['favorite'],\n      transformResponse: (data: any) => adaptHotelsToClient(data),\n    }),\n    getHotelId: builder.query<Hotel, number>({\n      query: (id) => `${ApiRoute.HOTELS}/${id}`,\n      providesTags: ['favorite'],\n      transformResponse: (data: any) => adaptHotelIdToClient(data),\n    }),\n    getHotelIdNearby: builder.query<Hotel[], number>({\n      query: (id) => `${ApiRoute.HOTELS}/${id}/nearby`,\n      providesTags: ['favorite'],\n      transformResponse: (data: any) => adaptHotelsToClient(data),\n    }),\n\n    getFavorites: builder.query<Hotel[], void>({\n      query: () => ApiRoute.FAVORITE,\n      providesTags: ['favorite'],\n      transformResponse: (data: any) => adaptHotelsToClient(data),\n    }),\n    postFavoriteStatus: builder.mutation<Hotel, {id: number, status: number}>({\n      query: ({ id, status }) => ({\n        url: `${ApiRoute.FAVORITE}/${id}/${status}`,\n        method: 'POST',\n      }),\n      invalidatesTags: ['favorite'],\n      transformResponse: (data: any) => adaptHotelIdToClient(data),\n    }),\n\n    getComments: builder.query<CommentGet[], number>({\n      query: (id) => `${ApiRoute.COMMENTS}/${id}`,\n      providesTags: ['comment'],\n      transformResponse: (data: any) => adaptCommentsToClient(data),\n    }),\n    postComment: builder.mutation<CommentGet[], {id: number, body: CommentPost}>({\n      query: ({ id, body }) => ({\n        url: `${ApiRoute.COMMENTS}/${id}`,\n        method: 'POST',\n        body,\n      }),\n      invalidatesTags: ['comment'],\n    }),\n\n    getLogin: builder.query<LoginGet, void>({\n      query: () => ApiRoute.LOGIN,\n      transformResponse: (data: any) => adaptLoginToClient(data),\n    }),\n    postLogin: builder.mutation<LoginGet, LoginPost>({\n      query: (body) => ({\n        url: ApiRoute.LOGIN,\n        method: 'POST',\n        body,\n      }),\n    }),\n    deleteLogout: builder.mutation<void, void>({\n      query: () => ({\n        url: ApiRoute.LOGOUT,\n        method: 'DELETE',\n      }),\n    }),\n  }),\n});\n\nexport const {\n  reducer,\n  reducerPath,\n\n  usePostFavoriteStatusMutation,\n  usePostCommentMutation,\n  useGetLoginQuery,\n  usePostLoginMutation,\n} = api;\n","import { configureStore } from '@reduxjs/toolkit';\nimport { api } from '../services/rtk-api';\n\nexport const сities = [\n  {\n    location: {\n      latitude: 48.85,\n      longitude: 2.35,\n      zoom: 10,\n    },\n    name: 'Paris',\n  },\n  {\n    location: {\n      latitude: 50.9375,\n      longitude: 6.9603,\n      zoom: 10,\n    },\n    name: 'Cologne',\n  },\n  {\n    location: {\n      latitude: 50.8503,\n      longitude: 4.3517,\n      zoom: 10,\n    },\n    name: 'Brussels',\n  },\n  {\n    location: {\n      latitude: 52.370216,\n      longitude: 4.895168,\n      zoom: 10,\n    },\n    name: 'Amsterdam',\n  },\n  {\n    location: {\n      latitude: 53.5511,\n      longitude: 9.9937,\n      zoom: 10,\n    },\n    name: 'Hamburg',\n  },\n  {\n    location: {\n      latitude: 51.2277,\n      longitude: 6.7735,\n      zoom: 10,\n    },\n    name: 'Dusseldorf',\n  },\n];\n\n// TODO коллбеки тестировать отдельно. Тест редьюсера:\n// Поведение редьюсера списка городов всегда возвращает список констант\nexport const store = configureStore({\n  reducer: {\n    cities: () => сities,\n    [api.reducerPath]: api.reducer,\n  },\n  middleware: (getDefaultMiddleware) => getDefaultMiddleware().concat(api.middleware),\n});\n\nexport type InitialStateType = ReturnType<typeof store.getState>\n","import dayjs from 'dayjs';\nimport { AppRoute } from '../const';\n\nconst PERCENT = 100;\nconst TOTAL_RATING = 5;\nconst HOMEPAGE = '/845299-six-cities-7/';\n\nexport const getRating = (part = 0):string => `${Math.round(part) * (PERCENT / TOTAL_RATING)}%`;\nexport const sortByNowToOld = (date1: string, date2: string) :number => dayjs(date2)\n  .diff(dayjs(date1));\n\nexport const getRoute = (target: string, id?: number): string => {\n  switch (target) {\n    case AppRoute.MAIN:\n      return HOMEPAGE;\n    case AppRoute.OFFER:\n      return `${HOMEPAGE}${target}${id ? `/${id}` : ''}`;\n    default:\n      return `${HOMEPAGE}${target}`;\n  }\n};\n","import { LoginGet } from '../../data-type';\nimport { api } from '../../services/rtk-api';\n\nconst authorized = (): boolean => !!sessionStorage.getItem('token') ?? false;\n\nconst useLogin = (): {\n  data: LoginGet | undefined,\n  isLoading: boolean,\n  isAuth: boolean,\n  refetch: () => void,\n} => {\n  const isAuth = authorized();\n  const { data, isLoading, refetch } = api.endpoints.getLogin.useQuery();\n\n  return {\n    data, isLoading, isAuth, refetch,\n  };\n};\n\nexport default useLogin;\n","import { PropsWithChildren, ReactElement } from 'react';\nimport { Link } from 'react-router-dom';\nimport { AppRoute } from '../../const';\nimport { getRoute } from '../../utils/common';\nimport { HeaderViewParams } from './types';\n\nfunction HeaderView(params: PropsWithChildren<HeaderViewParams>): ReactElement {\n  const {\n    isAuth, avatarStyles, email = '', onSignOut,\n  } = params;\n\n  return (\n    <header className=\"header\">\n      <div className=\"container\">\n        <div className=\"header__wrapper\">\n          <div className=\"header__left\">\n            <Link className=\"header__logo-link header__logo-link--active\" to={getRoute(AppRoute.DEFAULT_CITY)}>\n              <img className=\"header__logo\" src=\"img/logo.svg\" alt=\"6 cities logo\" width={81} height={41} />\n            </Link>\n          </div>\n          <nav className=\"header__nav\">\n            <ul className=\"header__nav-list\">\n              {(isAuth\n              && (\n                <li className=\"header__nav-item user\">\n                  <Link className=\"header__nav-link header__nav-link--profile\" to={getRoute(AppRoute.FAVORITES)}>\n                    <div className=\"header__avatar-wrapper user__avatar-wrapper\" style={avatarStyles} />\n                    <span className=\"header__user-name user__name\">{email}</span>\n                  </Link>\n                </li>\n              )\n              )}\n              <li className=\"header__nav-item\">\n                {(isAuth\n                && (\n                  <a className=\"header__nav-link\" href=\"/\" onClick={onSignOut}>\n                    <span className=\"header__signout\">Sign out</span>\n                  </a>\n                )\n                )}\n                {(!isAuth\n                && (\n                  <Link className=\"header__nav-link\" to={getRoute(AppRoute.LOGIN)}>\n                    <span className=\"header__signout\">Sign in</span>\n                  </Link>\n                )\n                )}\n              </li>\n            </ul>\n          </nav>\n        </div>\n      </div>\n    </header>\n  );\n}\n\nexport default HeaderView;\n","import { PropsWithChildren, ReactElement } from 'react';\nimport { ErrorMessageParams } from './types';\n\nfunction ErrorMessage(params: PropsWithChildren<ErrorMessageParams>): ReactElement {\n  const { text } = params;\n\n  return (\n    <div className=\"container fixed\">\n      <div className=\"form__submit\">\n        {text}\n      </div>\n    </div>\n  );\n}\n\nexport default ErrorMessage;\n","import {\n  ReactElement, MouseEvent, CSSProperties, useState, useCallback\n} from 'react';\nimport useLogin from '../../hooks/selectors/use-login';\nimport { api } from '../../services/rtk-api';\nimport HeaderView from './header-view';\nimport { MESSAGE_DISPLAY_TIME, MESSAGE_NOT_INTERNET } from '../../const';\nimport ErrorMessage from './error-message';\n\nfunction Header(): ReactElement {\n  const { data, isAuth, refetch } = useLogin();\n  const [deleteLogout] = api.endpoints.deleteLogout.useMutation();\n  const [isShowError, setIsShowError] = useState<boolean>(false);\n\n  const onSignOut = useCallback((evt: MouseEvent<HTMLElement>) => {\n    evt.preventDefault();\n    const apiResult = deleteLogout();\n    apiResult.unwrap()\n      .catch(() => {\n        setIsShowError(true);\n        setTimeout(() => setIsShowError(false), MESSAGE_DISPLAY_TIME);\n      }).finally(() => {\n        sessionStorage.removeItem('token');\n        refetch();\n      });\n  }, [isAuth]);\n\n  const avatarStyles = {\n    backgroundImage: `url(${data?.avatarUrl})`,\n  } as CSSProperties;\n\n  return (\n    <>\n      {(isShowError\n        && <ErrorMessage text={`${MESSAGE_NOT_INTERNET} Не беспокойтесь о ваших данных. Мы их успешно очистили :-)`} />\n      )}\n      <HeaderView\n        isAuth={isAuth}\n        avatarStyles={avatarStyles}\n        email={data?.email}\n        onSignOut={onSignOut}\n      />\n    </>\n  );\n}\n\nexport default Header;\n","import { ReactElement } from 'react';\nimport { BookmarkViewParams } from '../types';\n\nfunction BookmarkView(params: BookmarkViewParams): ReactElement {\n  const {\n    onSetFavorite, type, isFavorite, width, height,\n  } = params;\n\n  return (\n    <button\n      className={`${type}__bookmark-button button ${isFavorite ? `${type}__bookmark-button--active` : ''}`}\n      type=\"button\"\n      onClick={onSetFavorite}\n    >\n      <svg className={`${type}__bookmark-icon`} width={width} height={height}>\n        <use xlinkHref=\"#icon-bookmark\" />\n      </svg>\n      <span className=\"visually-hidden\">To bookmarks</span>\n    </button>\n  );\n}\n\nexport default BookmarkView;\n","import {\n  ReactElement, MouseEvent, useState, useCallback\n} from 'react';\nimport { useHistory } from 'react-router-dom';\nimport {\n  AppRoute, BookmarkType, MESSAGE_DISPLAY_TIME, MESSAGE_NOT_INTERNET\n} from '../../../const';\nimport useLogin from '../../../hooks/selectors/use-login';\nimport { usePostFavoriteStatusMutation } from '../../../services/rtk-api';\nimport { BookmarkParams } from '../types';\nimport BookmarkView from './bookmark-view';\nimport ErrorMessage from '../error-message';\n\nconst defaultStyle = {\n  type: BookmarkType.PROPERTY,\n  width: 31,\n  height: 33,\n};\n\nfunction Bookmark(params: BookmarkParams): ReactElement {\n  const { id, isFavorite, style = defaultStyle } = params;\n  const { type, width, height } = style;\n\n  const { isAuth } = useLogin();\n  const [isShowError, setIsShowError] = useState(false);\n  const history = useHistory();\n  const [favoriteStatus] = usePostFavoriteStatusMutation();\n\n  const onSetFavorite = useCallback((evt: MouseEvent<HTMLElement>) => {\n    evt.preventDefault();\n\n    if (!isAuth) {\n      history.push(`/${AppRoute.LOGIN}`);\n      return;\n    }\n\n    const changedStatus = !isFavorite ? 1 : 0;\n    const data = { id, status: changedStatus };\n    const apiResult = favoriteStatus(data);\n\n    apiResult.unwrap()\n      .catch(() => {\n        setIsShowError(true);\n        setTimeout(() => setIsShowError(false), MESSAGE_DISPLAY_TIME);\n      });\n  }, [isAuth, isFavorite]);\n\n  return (\n    <>\n      {(isShowError\n      && <ErrorMessage text={`Не удалось изменить статус карточки. ${MESSAGE_NOT_INTERNET}`} />\n      )}\n      <BookmarkView\n        onSetFavorite={onSetFavorite}\n        type={type}\n        isFavorite={isFavorite}\n        width={width}\n        height={height}\n      />\n    </>\n  );\n}\n\nexport default Bookmark;\n","import { ReactElement } from 'react';\nimport { BookmarkParams } from '../types';\nimport { BookmarkType } from '../../../const';\nimport Bookmark from './bookmark';\n\nconst style = {\n  type: BookmarkType.PLACE_CARD,\n  width: 18,\n  height: 19,\n};\n\nfunction BookmarkPlaceCard(params: BookmarkParams): ReactElement {\n  const { id, isFavorite } = params;\n\n  return (\n    <Bookmark\n      id={id}\n      isFavorite={isFavorite}\n      style={style}\n    />\n  );\n}\n\nexport default BookmarkPlaceCard;\n","import { ReactElement } from 'react';\nimport { Link } from 'react-router-dom';\nimport { CardType, AppRoute } from '../../../const';\nimport { CardParams } from '../types';\nimport { getRating, getRoute } from '../../../utils/common';\nimport BookmarkPlaceCard from '../bookmark/bookmark-place-card';\n\nconst imgSizeDefault = {\n  width: 260,\n  height: 200,\n};\n\nfunction Card(params: CardParams): ReactElement {\n  const {\n    cardData,\n    cardType = CardType.CITIES,\n    className,\n    children,\n    imgSize = imgSizeDefault,\n    onMouseEnter,\n    onMouseLeave,\n  } = params;\n\n  const {\n    isFavorite, previewImage, price, rating, title, type, id,\n  } = cardData;\n\n  return (\n    <article\n      className={`place-card ${className}`}\n      role=\"presentation\"\n      onMouseEnter={onMouseEnter}\n      onMouseLeave={onMouseLeave}\n    >\n      {children}\n      <div className={`${cardType}__image-wrapper place-card__image-wrapper`}>\n        <Link to={getRoute(AppRoute.OFFER, id)}>\n          <img\n            className=\"place-card__image\"\n            src={previewImage}\n            width={imgSize.width}\n            height={imgSize.height}\n            alt=\"Place\"\n          />\n        </Link>\n      </div>\n      <div className={`place-card__info ${cardType === CardType.FAVORITES ? 'favorites__card-info' : ''}`}>\n        <div className=\"place-card__price-wrapper\">\n          <div className=\"place-card__price\">\n            <b className=\"place-card__price-value\">\n              &euro;\n              {price}\n            </b>\n            <span className=\"place-card__price-text\">\n              &#47;&nbsp;night\n            </span>\n          </div>\n          <BookmarkPlaceCard id={id} isFavorite={isFavorite} />\n        </div>\n        <div className=\"place-card__rating rating\">\n          <div className=\"place-card__stars rating__stars\">\n            <span style={{ width: getRating(rating) }} />\n            <span className=\"visually-hidden\">Rating</span>\n          </div>\n        </div>\n        <h2 className=\"place-card__name\">\n          <Link to={getRoute(AppRoute.OFFER, id)}>{title}</Link>\n        </h2>\n        <p className=\"place-card__type\">{type}</p>\n      </div>\n    </article>\n  );\n}\n\nexport default Card;\n","import { ReactElement } from 'react';\nimport { CardParams } from '../types';\nimport { CardType } from '../../../const';\nimport Card from './card';\n\nconst imgSize = {\n  width: 260,\n  height: 200,\n};\n\nfunction CardCities(params: CardParams): ReactElement {\n  const {\n    className = '', cardData, onMouseEnter, onMouseLeave,\n  } = params;\n  const { isPremium } = cardData;\n\n  return (\n    <Card\n      className={`cities__place-card ${className}`}\n      cardData={cardData}\n      cardType={CardType.CITIES}\n      onMouseEnter={onMouseEnter}\n      onMouseLeave={onMouseLeave}\n      imgSize={imgSize}\n    >\n      {isPremium\n        ? (\n          <div className=\"place-card__mark\">\n            <span>Premium</span>\n          </div>\n        ) : <> </>}\n    </Card>\n  );\n}\n\nexport default CardCities;\n","import { useEffect, useState } from 'react';\nimport leaflet from 'leaflet';\nimport { City } from '../data-type';\n\nfunction useMap(mapRef: HTMLDivElement | null, city: City): leaflet.Map | null {\n  const [map, setMap] = useState<leaflet.Map | null>(null);\n\n  useEffect(() => {\n    if (mapRef !== null && map === null) {\n      const instance = leaflet.map(mapRef, {\n        center: {\n          lat: city.location.latitude,\n          lng: city.location.longitude,\n        },\n        zoom: city.location.zoom,\n      });\n\n      leaflet\n        .tileLayer(\n          'https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png',\n          {\n            attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors &copy; <a href=\"https://carto.com/attributions\">CARTO</a>',\n          },\n        )\n        .addTo(instance);\n\n      setMap(instance);\n    }\n  }, [mapRef, map, city]);\n\n  return map;\n}\n\nexport default useMap;\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport {\n  PropsWithChildren, ReactElement, useEffect, useRef\n} from 'react';\nimport leaflet from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport { MapParams } from './types';\nimport useMap from '../../hooks/useMap';\n\nconst pin = leaflet.icon({\n  iconUrl: 'img/pin.svg',\n  iconSize: [30, 45],\n  iconAnchor: [15, 45],\n});\n\nconst pinActive = leaflet.icon({\n  iconUrl: 'img/pin-active.svg',\n  iconSize: [30, 45],\n  iconAnchor: [15, 45],\n});\n\nconst markers: leaflet.Marker<any>[] = [];\n\nfunction Map(params: PropsWithChildren<MapParams>): ReactElement {\n  const { selectedPoint, activeCity, hotels } = params;\n\n  const mapRef = useRef<HTMLDivElement>(null);\n  const map = useMap(mapRef.current, activeCity);\n\n  useEffect(() => {\n    if (map) {\n      markers.forEach((marker) => {\n        marker.remove();\n      });\n\n      hotels.forEach((point) => {\n        markers.push(\n          leaflet\n            .marker({\n              lat: point.location.latitude,\n              lng: point.location.longitude,\n            }, {\n              icon: (point.id === selectedPoint?.id) ? pinActive : pin,\n            })\n            .addTo(map),\n        );\n      });\n    }\n  }, [map, hotels, pin, pinActive, selectedPoint]);\n\n  useEffect(() => {\n    map?.flyTo(\n      leaflet.latLng(activeCity.location.latitude, activeCity.location.longitude),\n      activeCity.location.zoom,\n      {\n        animate: true,\n        duration: 1,\n        easeLinearity: 0.3,\n      },\n    );\n  }, [map, activeCity]);\n\n  return (\n    <div\n      style={{ height: '100%' }}\n      ref={mapRef}\n    />\n  );\n}\n\nexport default Map;\n","import { PropsWithChildren, ReactElement } from 'react';\nimport { useHistory } from 'react-router';\nimport { AppRoute } from '../../const';\nimport { getRoute } from '../../utils/common';\nimport { SortingDropdownBtnParams } from './types';\n\nfunction SortingDropdownBtn(params: PropsWithChildren<SortingDropdownBtnParams>): ReactElement {\n  const { sortType, activeSortType, city } = params;\n  const history = useHistory();\n\n  return (\n    <li className={`places__option ${activeSortType.path === sortType.path ? 'places__option--active' : ''}`}>\n      <div\n        role=\"button\"\n        tabIndex={0}\n        onClick={() => history.push(`${getRoute(AppRoute.MAIN)}${city}/${sortType.path}`)}\n        onKeyDown={(ev) => {\n          if (ev.key === 'Enter') {\n            history.push(`${getRoute(AppRoute.MAIN)}${city}/${sortType.path}`);\n          }\n        }}\n      >\n        {sortType.name}\n      </div>\n    </li>\n  );\n}\n\nexport default SortingDropdownBtn;\n","import { ReactElement, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { SortingType } from '../../const';\nimport SortingDropdownBtn from './sorting-dropdown-btn';\n\nfunction SortingDropdown(): ReactElement {\n  const { city, sorting = SortingType.POPULAR.path } = useParams<{\n    city: string,\n    sorting: string | undefined\n  }>();\n  const [isOpen, setIsOpen] = useState<boolean>(false);\n\n  const sortingArr = Object.values(SortingType);\n  const activeSortType = sortingArr.find((sort) => sort.path === sorting) ?? SortingType.POPULAR;\n\n  return (\n    <form className=\"places__sorting\" action=\"#\" method=\"get\">\n      <span className=\"places__sorting-caption\">Sort by</span>\n      {' '}\n      <span\n        className=\"places__sorting-type\"\n        role=\"button\"\n        tabIndex={0}\n        onClick={() => setIsOpen(!isOpen)}\n        onMouseEnter={() => setIsOpen(true)}\n        onKeyDown={(ev) => {\n          if (ev.key === 'Enter') {\n            setIsOpen(!isOpen);\n          }\n        }}\n      >\n        {activeSortType.name}\n        <svg className=\"places__sorting-arrow\" width={7} height={4}>\n          <use xlinkHref=\"#icon-arrow-select\" />\n        </svg>\n      </span>\n      <ul\n        className={`places__options places__options--custom ${isOpen ? 'places__options--opened' : ''}`}\n        onMouseLeave={() => setIsOpen(false)}\n      >\n        {sortingArr.map((sortTypeName) => (\n          <SortingDropdownBtn\n            key={sortTypeName.path}\n            sortType={sortTypeName}\n            activeSortType={activeSortType}\n            city={city}\n          />\n        ))}\n      </ul>\n    </form>\n  );\n}\n\nexport default SortingDropdown;\n","import { PropsWithChildren, ReactElement, useState } from 'react';\nimport { Hotel } from '../../data-type';\nimport CardCities from './card/card-cities';\nimport Map from './map';\nimport SortingDropdown from './sorting-dropdown';\nimport { OffersListParams } from './types';\n\nfunction OffersList(params: PropsWithChildren<OffersListParams>): ReactElement {\n  const { activeCity, hotels } = params;\n  const [activeCard, setActiveCard] = useState<Hotel>();\n\n  return (\n    <div className=\"cities\">\n      <div className=\"cities__places-container container\">\n        <section className=\"cities__places places\">\n          <h2 className=\"visually-hidden\">Places</h2>\n          <b className=\"places__found\">\n            {hotels.length}\n            {' '}\n            places to stay in\n            {' '}\n            {activeCity.name}\n          </b>\n          <SortingDropdown />\n          <div className=\"cities__places-list places__list tabs__content\">\n            {hotels.map((item) => (\n              <CardCities\n                key={item.id}\n                onMouseEnter={() => {\n                  setActiveCard(item);\n                }}\n                onMouseLeave={() => setActiveCard(undefined)}\n                cardData={item}\n              />\n            ))}\n          </div>\n        </section>\n        <div className=\"cities__right-section\">\n          <section className=\"cities__map map\">\n            <Map activeCity={activeCity} selectedPoint={activeCard} hotels={hotels} />\n          </section>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default OffersList;\n","import { Link } from 'react-router-dom';\nimport { ReactElement, PropsWithChildren } from 'react';\nimport { getRoute } from '../../utils/common';\nimport { CitiesListParams } from './types';\n\nfunction CitiesList(params: PropsWithChildren<CitiesListParams>): ReactElement {\n  const { activeCity, cities } = params;\n  return (\n    <div className=\"tabs\">\n      <section className=\"locations container\">\n        <ul className=\"locations__list tabs__list\">\n          {cities.map((city) => (\n            <li key={city.name} className=\"locations__item\">\n              <Link\n                className={`locations__item-link tabs__item ${city.name === activeCity.name ? 'tabs__item--active' : ''}`}\n                to={getRoute(city.name)}\n              >\n                <span>{city.name}</span>\n              </Link>\n            </li>\n          ))}\n        </ul>\n      </section>\n    </div>\n  );\n}\n\nexport default CitiesList;\n","import { ReactElement } from 'react';\n\nfunction Spinner(): ReactElement {\n  return (\n    <div className=\"cities__places-container container\">\n      <p className=\"login__title\">\n        Loading...\n      </p>\n    </div>\n  );\n}\n\nexport default Spinner;\n","import { ReactElement } from 'react';\n\nfunction OffersListEmpty(params: {activeCityName: string}): ReactElement {\n  const { activeCityName } = params;\n  return (\n    <div className=\"cities\">\n      <div className=\"cities__places-container cities__places-container--empty container\">\n        <section className=\"cities__no-places\">\n          <div className=\"cities__status-wrapper tabs__content\">\n            <b className=\"cities__status\">No places to stay available</b>\n            <p className=\"cities__status-description\">\n              We could not find any property available at the moment in\n              {' '}\n              {activeCityName}\n            </p>\n          </div>\n        </section>\n        <div className=\"cities__right-section\" />\n      </div>\n    </div>\n  );\n}\n\nexport default OffersListEmpty;\n","import { PropsWithChildren, ReactElement } from 'react';\nimport Header from '../features/header';\nimport OffersList from '../features/offers-list';\nimport CitiesList from '../features/cities-list';\nimport Spinner from '../features/spinner';\nimport OffersListEmpty from '../features/offers-list-empty';\nimport { MainViewParams } from './type';\n\nfunction MainView(params: PropsWithChildren<MainViewParams>): ReactElement {\n  const {\n    isLoading, activeCity, isEmpty, cities, hotels,\n  } = params;\n\n  return (\n    <>\n      <div style={{ display: 'none' }}>\n        <svg xmlns=\"http://www.w3.org/2000/svg\">\n          <symbol id=\"icon-arrow-select\" viewBox=\"0 0 7 4\"><path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M0 0l3.5 2.813L7 0v1.084L3.5 4 0 1.084V0z\" /></symbol>\n          <symbol id=\"icon-bookmark\" viewBox=\"0 0 17 18\"><path d=\"M3.993 2.185l.017-.092V2c0-.554.449-1 .99-1h10c.522 0 .957.41.997.923l-2.736 14.59-4.814-2.407-.39-.195-.408.153L1.31 16.44 3.993 2.185z\" /></symbol>\n          <symbol id=\"icon-star\" viewBox=\"0 0 13 12\"><path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M6.5 9.644L10.517 12 9.451 7.56 13 4.573l-4.674-.386L6.5 0 4.673 4.187 0 4.573 3.549 7.56 2.483 12 6.5 9.644z\" /></symbol>\n        </svg>\n      </div>\n      <div className=\"page page--gray page--main\">\n        <Header />\n        <main className={`page__main page__main--index ${isEmpty ? 'page__main--index-empty' : ''}`}>\n          <h1 className=\"visually-hidden\">Cities</h1>\n          <CitiesList activeCity={activeCity} cities={cities} />\n          {isLoading && (\n            <Spinner />\n          )}\n          {!isLoading && hotels.length === 0 && (\n            <OffersListEmpty activeCityName={activeCity.name} />\n          )}\n          {!isLoading && hotels.length !== 0 && (\n            <OffersList activeCity={activeCity} hotels={hotels} />\n          )}\n        </main>\n      </div>\n    </>\n  );\n}\n\nexport default MainView;\n","import { ReactElement } from 'react';\nimport { Link } from 'react-router-dom';\nimport { AppRoute } from '../../const';\nimport { getRoute } from '../../utils/common';\n\nfunction NotFound(): ReactElement {\n  return (\n    <div className=\"page page--gray page--login\">\n      <main className=\"page__main page__main--login\">\n        <div className=\"page__login-container container\">\n          <section className=\"login\">\n            <h1>404 Not Found</h1>\n            <Link className=\"form__submit button\" to={getRoute(AppRoute.DEFAULT_CITY)}>Go back</Link>\n          </section>\n        </div>\n      </main>\n    </div>\n  );\n}\n\nexport default NotFound;\n","import { useParams } from 'react-router-dom';\nimport { api } from '../../services/rtk-api';\n\nconst useIsEmpty = (): boolean => {\n  const { city } = useParams<{ city:string | undefined }>();\n\n  return !api.endpoints.getHotels.useQuery().data?.some((hotel) => hotel.city.name === city);\n};\n\nexport default useIsEmpty;\n","import { SortingType } from '../const';\nimport { Hotel } from '../data-type';\n\nconst sortByPriceHighToLow = (hotel1: Hotel, hotel2: Hotel): number => hotel2.price - hotel1.price;\nconst sortByPriceLowToHigh = (hotel1: Hotel, hotel2: Hotel): number => hotel1.price - hotel2.price;\nconst sortByRatedFirst = (hotel1: Hotel, hotel2: Hotel): number => hotel2.rating - hotel1.rating;\n\ntype Sorting = {\n  [key: string]: (hotels: Hotel[]) => Hotel[];\n}\n\nconst sorting: Sorting = {\n  [SortingType.POPULAR.path]: (hotels) => hotels,\n  [SortingType.PRICE_HIGH_TO_LOW.path]: (hotels) => hotels.sort(sortByPriceHighToLow),\n  [SortingType.PRICE_LOW_TO_HIGH.path]: (hotels) => hotels.sort(sortByPriceLowToHigh),\n  [SortingType.TOP_RATED_FIRST.path]: (hotels) => hotels.sort(sortByRatedFirst),\n};\n\nexport default sorting;\n","import { SortingType } from '../../const';\nimport { City, Hotel } from '../../data-type';\nimport { api } from '../../services/rtk-api';\nimport sorting from '../../utils/sorting';\n\ninterface useCurrentHotelsParams {\n  activeCity?: City,\n  sortingType?: string\n}\n\nconst useCurrentHotels = (params: useCurrentHotelsParams): {\n  hotels: Hotel[] | [],\n  isLoading: boolean,\n  isError: boolean\n} => {\n  const { activeCity, sortingType = SortingType.POPULAR.path } = params;\n  const { data: hotels = [], isLoading, isError } = api.endpoints.getHotels.useQuery();\n\n  if (hotels.length === 0) {\n    return { hotels, isLoading, isError };\n  }\n\n  const activeHotels = hotels.filter(\n    (hotel) => (hotel.city.name === activeCity?.name),\n  );\n\n  return { hotels: sorting[sortingType](activeHotels), isLoading, isError };\n};\n\nexport default useCurrentHotels;\n","import { ReactElement } from 'react';\nimport { useParams, Redirect } from 'react-router-dom';\nimport MainView from './main-view';\nimport NotFound from './not-found';\nimport { useCitiesList } from '../../hooks/selectors/use-cities-list';\nimport useIsEmpty from '../../hooks/selectors/use-is-empty';\nimport { AppRoute, MESSAGE_NOT_INTERNET } from '../../const';\nimport { getRoute } from '../../utils/common';\nimport useCurrentHotels from '../../hooks/selectors/use-current-hotels';\nimport ErrorMessage from '../features/error-message';\n\nfunction Main(): ReactElement {\n  const { city, sorting } = useParams<{ city:string | undefined, sorting: string | undefined }>();\n  const isEmpty = useIsEmpty();\n  const { activeCity, cities } = useCitiesList(city);\n  const { hotels, isLoading, isError } = useCurrentHotels({ activeCity, sortingType: sorting });\n\n  if (typeof city === 'undefined' || city === '') {\n    return <Redirect to={getRoute(AppRoute.DEFAULT_CITY)} />;\n  }\n\n  if (typeof activeCity === 'undefined') {\n    return <NotFound />;\n  }\n\n  return (\n    <>\n      {(isError\n      && <ErrorMessage text={`Не удалось загрузить отели. ${MESSAGE_NOT_INTERNET}`} />\n      )}\n      <MainView\n        isLoading={isLoading}\n        activeCity={activeCity}\n        isEmpty={isEmpty}\n        cities={cities}\n        hotels={hotels}\n      />\n    </>\n  );\n}\n\nexport default Main;\n","import { shallowEqual, useSelector } from 'react-redux';\nimport { City } from '../../data-type';\nimport { InitialStateType } from '../../store/reducer';\n\nexport const selectSityList = (\n  state: InitialStateType,\n  activeCityName: string | undefined,\n): {\n  activeCity: City | undefined,\n  cities: City[]\n} => ({\n  activeCity: state.cities.find((item) => item.name === activeCityName),\n  cities: state.cities,\n});\n\nexport const useCitiesList = (activeCityName: string | undefined): {\n  activeCity?: City;\n  cities: City[];\n} => useSelector((state: InitialStateType) => selectSityList(state, activeCityName), shallowEqual);\n","import { ReactElement } from 'react';\nimport { Link } from 'react-router-dom';\nimport { AppRoute } from '../../const';\nimport { getRoute } from '../../utils/common';\n\nfunction Footer(): ReactElement {\n  return (\n    <footer className=\"footer container\">\n      <Link className=\"footer__logo-link\" to={getRoute(AppRoute.DEFAULT_CITY)}>\n        <img className=\"footer__logo\" src=\"img/logo.svg\" alt=\"6 cities logo\" width={64} height={33} />\n      </Link>\n    </footer>\n  );\n}\n\nexport default Footer;\n","import { Hotel } from '../../data-type';\nimport { api } from '../../services/rtk-api';\n\nconst useFavoritesHotels = (): {\n  hotels: Hotel[],\n  isError: boolean,\n} => {\n  const { data: hotels = [], isError } = api.endpoints.getFavorites.useQuery();\n  return { hotels, isError };\n};\n\nexport default useFavoritesHotels;\n","import { ReactElement } from 'react';\nimport { CardParams } from '../types';\nimport { CardType } from '../../../const';\nimport Card from './card';\n\nconst imgSize = {\n  width: 150,\n  height: 110,\n};\n\nfunction CardCities(params: CardParams): ReactElement {\n  const { className = '', cardData } = params;\n\n  return (\n    <Card\n      className={`favorites__card ${className}`}\n      cardData={cardData}\n      cardType={CardType.FAVORITES}\n      imgSize={imgSize}\n    />\n  );\n}\n\nexport default CardCities;\n","import { PropsWithChildren, ReactElement } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Hotel } from '../../data-type';\nimport { getRoute } from '../../utils/common';\nimport CardFavorites from './card/card-favorites';\nimport { OffersListLocationParams, Location } from './types';\n\nfunction OffersListLocations(params: PropsWithChildren<OffersListLocationParams>): ReactElement {\n  const { hotels } = params;\n\n  const locationHotels = hotels.reduce((acc: Location, hotel: Hotel) => {\n    const cityName = hotel.city.name;\n\n    if (cityName in acc) {\n      acc[cityName].push(hotel);\n    } else {\n      acc[cityName] = [hotel];\n    }\n\n    return acc;\n  }, {});\n\n  return (\n    <section className=\"favorites\">\n      <h1 className=\"favorites__title\">Saved listing</h1>\n      <ul className=\"favorites__list\">\n        {Object.entries(locationHotels).map((location) => (\n          <li key={location[0]} className=\"favorites__locations-items\">\n            <div className=\"favorites__locations locations locations--current\">\n              <div className=\"locations__item\">\n                <Link className=\"locations__item-link\" to={getRoute(location[0])}>\n                  <span>{location[0]}</span>\n                </Link>\n              </div>\n            </div>\n            <div className=\"favorites__places\">\n              {location[1].map((hotel: Hotel) => (\n                <CardFavorites\n                  key={hotel.id}\n                  cardData={hotel}\n                />\n              ))}\n            </div>\n          </li>\n        ))}\n      </ul>\n    </section>\n  );\n}\n\nexport default OffersListLocations;\n","import { ReactElement } from 'react';\n\nfunction OffersListLocationsEmpty(): ReactElement {\n  return (\n    <section className=\"favorites favorites--empty\">\n      <h1 className=\"visually-hidden\">Favorites (empty)</h1>\n      <div className=\"favorites__status-wrapper\">\n        <b className=\"favorites__status\">Nothing yet saved.</b>\n        <p className=\"favorites__status-description\">Save properties to narrow down search or plan your future trips.</p>\n      </div>\n    </section>\n  );\n}\n\nexport default OffersListLocationsEmpty;\n","import { ReactElement } from 'react';\nimport Header from '../features/header';\nimport Footer from '../features/footer';\nimport useFavoritesHotels from '../../hooks/selectors/use-favorites-hotels';\nimport OffersListLocations from '../features/offers-list-locations';\nimport OffersListLocationsEmpty from '../features/offers-list-locations-empty';\nimport ErrorMessage from '../features/error-message';\nimport { MESSAGE_NOT_INTERNET } from '../../const';\n\nfunction Favorites(): ReactElement {\n  const { hotels, isError } = useFavoritesHotels();\n  const isEmpty = (hotels.length === 0);\n\n  return (\n    <>\n      {(isError\n      && <ErrorMessage text={`Не удалось загрузить избранные Вами отели. ${MESSAGE_NOT_INTERNET}`} />\n      )}\n      <div style={{ display: 'none' }}>\n        <svg xmlns=\"http://www.w3.org/2000/svg\">\n          <symbol id=\"icon-arrow-select\" viewBox=\"0 0 7 4\"><path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M0 0l3.5 2.813L7 0v1.084L3.5 4 0 1.084V0z\" /></symbol>\n          <symbol id=\"icon-bookmark\" viewBox=\"0 0 17 18\"><path d=\"M3.993 2.185l.017-.092V2c0-.554.449-1 .99-1h10c.522 0 .957.41.997.923l-2.736 14.59-4.814-2.407-.39-.195-.408.153L1.31 16.44 3.993 2.185z\" /></symbol>\n          <symbol id=\"icon-star\" viewBox=\"0 0 13 12\"><path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M6.5 9.644L10.517 12 9.451 7.56 13 4.573l-4.674-.386L6.5 0 4.673 4.187 0 4.573 3.549 7.56 2.483 12 6.5 9.644z\" /></symbol>\n        </svg>\n      </div>\n      <div className={`page ${isEmpty ? 'page--favorites-empty' : ''}`}>\n        <Header />\n        <main className={`page__main ${isEmpty ? 'page__main--favorites-empty' : 'page__main--favorites'}`}>\n          <div className=\"page__favorites-container container\">\n            {!isEmpty\n            && (\n              <OffersListLocations hotels={hotels} />\n            )}\n            {isEmpty\n            && (\n              <OffersListLocationsEmpty />\n            )}\n          </div>\n        </main>\n        <Footer />\n      </div>\n    </>\n  );\n}\n\nexport default Favorites;\n","import { useParams } from 'react-router-dom';\nimport { Hotel } from '../../data-type';\nimport { api } from '../../services/rtk-api';\n\nconst useHotel = (): {\n  hotels: Hotel[],\n  hotel?: Hotel,\n  isLoadingHotel: boolean,\n  isError: boolean,\n} => {\n  const { id } = useParams<{ id: string }>();\n  const { data: hotel, isLoading, isError } = api.endpoints.getHotelId.useQuery(Number(id));\n  const hotels = api.endpoints.getHotelIdNearby.useQuery(Number(id)).data ?? [];\n\n  return {\n    hotels, hotel, isLoadingHotel: isLoading, isError,\n  };\n};\n\nexport default useHotel;\n","import { ReactElement } from 'react';\nimport { CardParams } from '../types';\nimport { CardType } from '../../../const';\nimport Card from './card';\n\nconst imgSize = {\n  width: 260,\n  height: 200,\n};\n\nfunction CardCities(params: CardParams): ReactElement {\n  const {\n    className = '', cardData, onMouseEnter, onMouseLeave,\n  } = params;\n  const { isPremium } = cardData;\n\n  return (\n    <Card\n      className={`near-places__card ${className}`}\n      cardData={cardData}\n      cardType={CardType.NEAR_PLACES}\n      onMouseEnter={onMouseEnter}\n      onMouseLeave={onMouseLeave}\n      imgSize={imgSize}\n    >\n      {isPremium\n        ? (\n          <div className=\"place-card__mark\">\n            <span>Premium</span>\n          </div>\n        ) : <> </>}\n    </Card>\n  );\n}\n\nexport default CardCities;\n","import { CommentGet } from '../../data-type';\nimport { api } from '../../services/rtk-api';\n\nconst useCommentsList = (hotelId: number): {\n  comments: CommentGet[],\n  isLoading: boolean,\n  isError: boolean,\n} => {\n  const { data, isLoading, isError } = api.endpoints.getComments.useQuery(hotelId);\n\n  return { comments: data ?? [], isLoading, isError };\n};\n\nexport default useCommentsList;\n","import { Fragment, ReactElement } from 'react';\nimport { STARS } from '../../const';\nimport { CommentNewViewParams } from './types';\n\nfunction CommentNewView(params: CommentNewViewParams): ReactElement {\n  const {\n    onSubmit, onChange, rating, setRating, isFormDisabled, comment, setComment, isSubmitDisabled,\n  } = params;\n\n  return (\n    <form className=\"reviews__form form\" action=\"#\" method=\"post\" onSubmit={onSubmit} onChange={onChange}>\n      <label\n        className=\"reviews__label form__label\"\n        htmlFor=\"review\"\n      >\n        Your review\n      </label>\n      <div className=\"reviews__rating-form form__rating\">\n        {STARS.map((star) => (\n          <Fragment key={star}>\n            <input\n              className=\"form__rating-input visually-hidden\"\n              name=\"rating\"\n              defaultValue={star}\n              id={`${star}-stars`}\n              type=\"radio\"\n              checked={star === rating}\n              onChange={() => setRating(star)}\n              disabled={isFormDisabled}\n            />\n            <label className=\"reviews__rating-label form__rating-label\" htmlFor={`${star}-stars`} title=\"perfect\">\n              <svg className=\"form__star-image\" width={37} height={33}>\n                <use xlinkHref=\"#icon-star\" />\n              </svg>\n            </label>\n          </Fragment>\n        ))}\n      </div>\n      <textarea\n        className=\"reviews__textarea form__textarea\"\n        id=\"review\"\n        name=\"review\"\n        placeholder=\"Tell how was your stay, what you like and what can be improved\"\n        value={comment}\n        onChange={({ target }) => setComment(target.value)}\n        disabled={isFormDisabled}\n      />\n      <div className=\"reviews__button-wrapper\">\n        <p className=\"reviews__help\">\n          To submit review please make sure to set\n          {' '}\n          <span className=\"reviews__star\">rating</span>\n          {' '}\n          and describe your stay with at least\n          {' '}\n          <b className=\"reviews__text-amount\">50 characters</b>\n          .\n        </p>\n        <button\n          className=\"reviews__submit form__submit button\"\n          type=\"submit\"\n          disabled={isSubmitDisabled}\n        >\n          Submit\n        </button>\n      </div>\n    </form>\n  );\n}\n\nexport default CommentNewView;\n","import {\n  FormEvent, ReactElement, useCallback, useState\n} from 'react';\nimport { CommentOptions, MESSAGE_DISPLAY_TIME, MESSAGE_NOT_INTERNET } from '../../const';\nimport ErrorMessage from './error-message';\nimport { usePostCommentMutation } from '../../services/rtk-api';\nimport CommentNewView from './comment-new-view';\n\nconst isValidComment = (comment: string) => {\n  if (comment.length >= CommentOptions.MIN_LENGTH && comment.length <= CommentOptions.MAX_LENGTH) {\n    return true;\n  }\n  return false;\n};\n\nfunction CommentNew(params: {hotelId: number}): ReactElement {\n  const { hotelId } = params;\n  const [postComment] = usePostCommentMutation();\n  const [isSubmitDisabled, setIsSubmitDisabled] = useState<boolean>(true);\n  const [isFormDisabled, setIsFormDisabled] = useState<boolean>(false);\n  const [isShowError, setIsShowError] = useState<boolean>(false);\n  const [comment, setComment] = useState<string>('');\n  const [rating, setRating] = useState<number>(0);\n\n  const onChange = useCallback(() => {\n    if (isValidComment(comment) && rating !== 0) {\n      setIsSubmitDisabled(false);\n      return;\n    }\n    setIsSubmitDisabled(true);\n  }, [comment, rating]);\n\n  const onSubmit = useCallback((evt: FormEvent<HTMLFormElement>) => {\n    evt.preventDefault();\n\n    setIsFormDisabled(true);\n    setIsSubmitDisabled(true);\n\n    const data = { id: hotelId, body: { comment, rating } };\n    const apiResult = postComment(data);\n\n    apiResult.unwrap().then(() => {\n      setIsFormDisabled(false);\n      setRating(0);\n      setComment('');\n    }).catch(() => {\n      setIsFormDisabled(false);\n      setIsSubmitDisabled(false);\n      setIsShowError(true);\n      setTimeout(() => setIsShowError(false), MESSAGE_DISPLAY_TIME);\n    });\n  }, [comment, rating]);\n\n  return (\n    <>\n      {(isShowError\n        && <ErrorMessage text={`Не удалось отправить сообщение. ${MESSAGE_NOT_INTERNET}`} />\n      )}\n      <CommentNewView\n        onSubmit={onSubmit}\n        onChange={onChange}\n        rating={rating}\n        setRating={setRating}\n        isFormDisabled={isFormDisabled}\n        comment={comment}\n        setComment={setComment}\n        isSubmitDisabled={isSubmitDisabled}\n      />\n    </>\n  );\n}\n\nexport default CommentNew;\n","import dayjs from 'dayjs';\nimport { PropsWithChildren, ReactElement } from 'react';\nimport { getRating } from '../../utils/common';\nimport { CommentParams } from './types';\n\nfunction Comment(params: PropsWithChildren<CommentParams>): ReactElement {\n  const { commentData } = params;\n  const {\n    user, rating, comment, date,\n  } = commentData;\n  const { avatarUrl, name } = user;\n\n  return (\n    <li className=\"reviews__item\">\n      <div className=\"reviews__user user\">\n        <div className=\"reviews__avatar-wrapper user__avatar-wrapper\">\n          <img className=\"reviews__avatar user__avatar\" src={avatarUrl} width={54} height={54} alt=\"Reviews avatar\" />\n        </div>\n        <span className=\"reviews__user-name\">\n          {name}\n        </span>\n      </div>\n      <div className=\"reviews__info\">\n        <div className=\"reviews__rating rating\">\n          <div className=\"reviews__stars rating__stars\">\n            <span style={{ width: getRating(rating) }} />\n            <span className=\"visually-hidden\">Rating</span>\n          </div>\n        </div>\n        <p className=\"reviews__text\">\n          {comment}\n        </p>\n        <time className=\"reviews__time\" dateTime={dayjs(date).format('YYYY-MM-DD')}>{dayjs(date).format('MMMM YYYY')}</time>\n      </div>\n    </li>\n  );\n}\n\nexport default Comment;\n","import { PropsWithChildren, ReactElement } from 'react';\nimport CommentNew from './comment-new';\nimport Comment from './comment';\nimport { CommentsListViewParams } from './types';\n\nfunction CommentsListView(params: PropsWithChildren<CommentsListViewParams>): ReactElement {\n  const {\n    commentsTotal, shownComments, isAuth, hotelId,\n  } = params;\n\n  return (\n    <section className=\"property__reviews reviews\">\n      <h2 className=\"reviews__title\">\n        Reviews ·\n        {' '}\n        <span className=\"reviews__amount\">{commentsTotal}</span>\n      </h2>\n      <ul className=\"reviews__list\">\n        {shownComments.map((comment) => (\n          <Comment key={comment.id} commentData={comment} />\n        ))}\n      </ul>\n      {isAuth && (\n        <CommentNew hotelId={hotelId} />\n      )}\n    </section>\n  );\n}\n\nexport default CommentsListView;\n","import { PropsWithChildren, ReactElement } from 'react';\nimport useCommentsList from '../../hooks/selectors/use-comments-list';\nimport { sortByNowToOld } from '../../utils/common';\nimport Spinner from './spinner';\nimport CommentsListView from './comments-list-view';\nimport { CommentsListParams } from './types';\nimport ErrorMessage from './error-message';\nimport { MESSAGE_NOT_INTERNET } from '../../const';\n\nfunction CommentsList(params: PropsWithChildren<CommentsListParams>): ReactElement {\n  const { isAuth = false, hotelId } = params;\n  const { comments, isLoading, isError } = useCommentsList(hotelId);\n\n  const shownComments = [...comments].sort(\n    (comment1, comment2) => sortByNowToOld(comment1.date, comment2.date),\n  ).slice(0, 10);\n\n  if (isLoading) {\n    return <Spinner />;\n  }\n\n  return (\n    <>\n      {(isError\n      && <ErrorMessage text={`Не удалось загрузить список сообщений. ${MESSAGE_NOT_INTERNET}`} />\n      )}\n      <CommentsListView\n        commentsTotal={comments.length}\n        shownComments={shownComments}\n        isAuth={isAuth}\n        hotelId={hotelId}\n      />\n    </>\n  );\n}\n\nexport default CommentsList;\n","import { ReactElement } from 'react';\nimport { BookmarkParams } from '../types';\nimport { BookmarkType } from '../../../const';\nimport Bookmark from './bookmark';\n\nconst style = {\n  type: BookmarkType.PROPERTY,\n  width: 31,\n  height: 33,\n};\n\nfunction BookmarkProperty(params: BookmarkParams): ReactElement {\n  const { id, isFavorite } = params;\n\n  return (\n    <Bookmark\n      id={id}\n      isFavorite={isFavorite}\n      style={style}\n    />\n  );\n}\n\nexport default BookmarkProperty;\n","import { PropsWithChildren, ReactElement } from 'react';\nimport { HostParams } from './types';\n\nfunction HostView(params: PropsWithChildren<HostParams>): ReactElement {\n  const {\n    host,\n    children,\n  } = params;\n\n  const { avatarUrl, isPro, name } = host;\n\n  return (\n    <div className=\"property__host\">\n      <h2 className=\"property__host-title\">Meet the host</h2>\n      <div className=\"property__host-user user\">\n        <div className={`property__avatar-wrapper user__avatar-wrapper ${isPro ? 'property__avatar-wrapper--pro' : ''}`}>\n          <img className=\"property__avatar user__avatar\" src={avatarUrl} width={74} height={74} alt={`Avatar ${name}`} />\n        </div>\n        <span className=\"property__user-name\">\n          {name}\n        </span>\n        {isPro && (\n          <span className=\"property__user-status\">\n            Pro\n          </span>\n        )}\n      </div>\n      {children}\n    </div>\n  );\n}\n\nexport default HostView;\n","import { PropsWithChildren, ReactElement } from 'react';\nimport { getRating } from '../../utils/common';\nimport Header from '../features/header';\nimport CardNearPlaces from '../features/card/card-near-places';\nimport CommentsList from '../features/comments-list';\nimport Map from '../features/map';\nimport BookmarkProperty from '../features/bookmark/bookmark-property';\nimport { MAX_IMAGES_IN_ROOM_PAGE } from '../../const';\nimport HostView from '../features/host-view';\nimport { RoomViewParams } from './type';\n\nfunction RoomView(params: PropsWithChildren<RoomViewParams>): ReactElement {\n  const { isAuth, hotel, hotels } = params;\n  const {\n    type: hotelType,\n    images,\n    isPremium,\n    title,\n    id: hotelId,\n    isFavorite,\n    rating,\n    bedrooms,\n    maxAdults,\n    price,\n    goods,\n    host,\n    description,\n    city,\n  } = hotel;\n  const hotelsInMap = [...hotels, hotel];\n\n  return (\n    <>\n      <div style={{ display: 'none' }}>\n        <svg xmlns=\"http://www.w3.org/2000/svg\">\n          <symbol id=\"icon-arrow-select\" viewBox=\"0 0 7 4\"><path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M0 0l3.5 2.813L7 0v1.084L3.5 4 0 1.084V0z\" /></symbol>\n          <symbol id=\"icon-bookmark\" viewBox=\"0 0 17 18\"><path d=\"M3.993 2.185l.017-.092V2c0-.554.449-1 .99-1h10c.522 0 .957.41.997.923l-2.736 14.59-4.814-2.407-.39-.195-.408.153L1.31 16.44 3.993 2.185z\" /></symbol>\n          <symbol id=\"icon-star\" viewBox=\"0 0 13 12\"><path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M6.5 9.644L10.517 12 9.451 7.56 13 4.573l-4.674-.386L6.5 0 4.673 4.187 0 4.573 3.549 7.56 2.483 12 6.5 9.644z\" /></symbol>\n        </svg>\n      </div>\n      <div className=\"page\">\n        <Header />\n        <main className=\"page__main page__main--property\">\n          <section className=\"property\">\n            <div className=\"property__gallery-container container\">\n              <div className=\"property__gallery\">\n                {images.slice(0, MAX_IMAGES_IN_ROOM_PAGE).map((image) => (\n                  <div key={image} className=\"property__image-wrapper\">\n                    <img className=\"property__image\" src={image} alt={hotelType} />\n                  </div>\n                ))}\n              </div>\n            </div>\n            <div className=\"property__container container\">\n              <div className=\"property__wrapper\">\n                {isPremium && (\n                  <div className=\"property__mark\">\n                    <span>Premium</span>\n                  </div>\n                )}\n                <div className=\"property__name-wrapper\">\n                  <h1 className=\"property__name\">\n                    {title}\n                  </h1>\n                  <BookmarkProperty id={hotelId} isFavorite={isFavorite} />\n                </div>\n                <div className=\"property__rating rating\">\n                  <div className=\"property__stars rating__stars\">\n                    <span style={{ width: getRating(rating) }} />\n                    <span className=\"visually-hidden\">Rating</span>\n                  </div>\n                  <span className=\"property__rating-value rating__value\">{rating}</span>\n                </div>\n                <ul className=\"property__features\">\n                  <li className=\"property__feature property__feature--entire\">\n                    {hotelType}\n                  </li>\n                  <li className=\"property__feature property__feature--bedrooms\">\n                    {bedrooms}\n                    {' '}\n                    Bedrooms\n                  </li>\n                  <li className=\"property__feature property__feature--adults\">\n                    Max\n                    {' '}\n                    {maxAdults}\n                    {' '}\n                    adults\n                  </li>\n                </ul>\n                <div className=\"property__price\">\n                  <b className=\"property__price-value\">\n                    €\n                    {price}\n                  </b>\n                  <span className=\"property__price-text\">&nbsp;night</span>\n                </div>\n                <div className=\"property__inside\">\n                  <h2 className=\"property__inside-title\">What&lsquo;s inside</h2>\n                  <ul className=\"property__inside-list\">\n                    {goods.map((item) => (\n                      <li key={item} className=\"property__inside-item\">\n                        {item}\n                      </li>\n                    ))}\n                  </ul>\n                </div>\n                <HostView host={host}>\n                  <div className=\"property__description\">\n                    <p className=\"property__text\">\n                      {description}\n                    </p>\n                  </div>\n                </HostView>\n                <CommentsList isAuth={isAuth} hotelId={hotelId} />\n              </div>\n            </div>\n            <section className=\"property__map map\">\n              <Map activeCity={city} hotels={hotelsInMap} selectedPoint={hotel} />\n            </section>\n          </section>\n          <div className=\"container\">\n            <section className=\"near-places places\">\n              <h2 className=\"near-places__title\">Other places in the neighbourhood</h2>\n              <div className=\"near-places__list places__list\">\n                {hotels.slice(0, 3).map((item) => (\n                  <CardNearPlaces\n                    key={item.id}\n                    cardData={item}\n                  />\n                ))}\n              </div>\n            </section>\n          </div>\n        </main>\n      </div>\n    </>\n  );\n}\n\nexport default RoomView;\n","import { PropsWithChildren, ReactElement } from 'react';\nimport useHotel from '../../hooks/selectors/use-hotel';\nimport NotFoundPage from './not-found';\nimport { MESSAGE_NOT_INTERNET } from '../../const';\nimport Spinner from '../features/spinner';\nimport ErrorMessage from '../features/error-message';\nimport { RoomParams } from './type';\nimport RoomView from './room-view';\n\nfunction Room(params: PropsWithChildren<RoomParams>): ReactElement {\n  const { isAuth = false } = params;\n  const {\n    hotels = [], hotel, isLoadingHotel, isError,\n  } = useHotel();\n\n  if (isLoadingHotel) {\n    return <Spinner />;\n  }\n\n  if (isError) {\n    return <ErrorMessage text={`Не удалось загрузить информацио об отеле. ${MESSAGE_NOT_INTERNET}`} />;\n  }\n\n  if (hotel === undefined) {\n    return <NotFoundPage />;\n  }\n\n  return (\n    <RoomView isAuth={isAuth} hotel={hotel} hotels={hotels} />\n  );\n}\n\nexport default Room;\n","import {\n  FormEvent, ReactElement, useCallback, useEffect, useState\n} from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport {\n  AppRoute, MESSAGE_DISPLAY_TIME, RegularExpression, MESSAGE_NOT_INTERNET\n} from '../../const';\nimport { useGetLoginQuery, usePostLoginMutation } from '../../services/rtk-api';\nimport { getRoute } from '../../utils/common';\nimport { InputCheckType } from './type';\nimport Header from '../features/header';\nimport ErrorMessage from '../features/error-message';\n\nfunction SignIn(): ReactElement {\n  const { refetch } = useGetLoginQuery();\n  const [postLogin] = usePostLoginMutation();\n  const history = useHistory();\n  const [emailCheck, setEmailCheck] = useState<InputCheckType>({\n    data: '',\n    message: '',\n    success: false,\n  });\n  const [passwordCheck, setPasswordCheck] = useState<InputCheckType>({\n    data: '',\n    message: '',\n    success: false,\n  });\n  const [isShowError, setIsShowError] = useState<boolean>(false);\n  const checkedFormData = (email: string, password: string) => {\n    if (!RegularExpression.EMAIL.test(email)) {\n      setEmailCheck({\n        data: email,\n        message: 'Typo in email',\n        success: false,\n      });\n      return;\n    }\n\n    setEmailCheck({\n      data: email,\n      message: '',\n      success: true,\n    });\n\n    if (!RegularExpression.ONE_SIMBOL.test(password)) {\n      setPasswordCheck({\n        data: password,\n        message: 'Password should not consist of only spaces',\n        success: false,\n      });\n      return;\n    }\n\n    setPasswordCheck({\n      data: password,\n      message: '',\n      success: true,\n    });\n  };\n\n  const onSubmit = useCallback((evt: FormEvent<HTMLFormElement>) => {\n    evt.preventDefault();\n    const formData = new FormData(evt.currentTarget);\n    const email = formData.get('email') as string;\n    const password = formData.get('password') as string;\n\n    checkedFormData(email, password);\n  }, []);\n\n  useEffect(() => {\n    if (emailCheck.success && passwordCheck.success) {\n      const formData = {\n        email: emailCheck.data,\n        password: passwordCheck.data,\n      };\n      const apiResult = postLogin(formData);\n\n      apiResult.unwrap().then((user) => {\n        sessionStorage.setItem('token', user.token);\n        refetch();\n        history.push(AppRoute.DEFAULT_CITY);\n      })\n        .catch(() => {\n          setIsShowError(true);\n          setTimeout(() => setIsShowError(false), MESSAGE_DISPLAY_TIME);\n        });\n    }\n  }, [postLogin, emailCheck, passwordCheck, history, refetch]);\n\n  return (\n    <>\n      {(isShowError\n      && <ErrorMessage text={`Не удалось зарегистрироваться. ${MESSAGE_NOT_INTERNET}`} />\n      )}\n      <div style={{ display: 'none' }}>\n        <svg xmlns=\"http://www.w3.org/2000/svg\">\n          <symbol id=\"icon-arrow-select\" viewBox=\"0 0 7 4\"><path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M0 0l3.5 2.813L7 0v1.084L3.5 4 0 1.084V0z\" /></symbol>\n          <symbol id=\"icon-bookmark\" viewBox=\"0 0 17 18\"><path d=\"M3.993 2.185l.017-.092V2c0-.554.449-1 .99-1h10c.522 0 .957.41.997.923l-2.736 14.59-4.814-2.407-.39-.195-.408.153L1.31 16.44 3.993 2.185z\" /></symbol>\n          <symbol id=\"icon-star\" viewBox=\"0 0 13 12\"><path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M6.5 9.644L10.517 12 9.451 7.56 13 4.573l-4.674-.386L6.5 0 4.673 4.187 0 4.573 3.549 7.56 2.483 12 6.5 9.644z\" /></symbol>\n        </svg>\n      </div>\n      <div className=\"page page--gray page--login\">\n        <Header />\n        <main className=\"page__main page__main--login\">\n          <div className=\"page__login-container container\">\n            <section className=\"login\">\n              <h1 className=\"login__title\">Sign in</h1>\n              <form className=\"login__form form\" action=\"#\" method=\"post\" onSubmit={onSubmit}>\n                <div className=\"login__input-wrapper form__input-wrapper\">\n                  {(emailCheck.message && <div>{emailCheck.message}</div>)}\n                  <label className=\"visually-hidden\">E-mail</label>\n                  <input className=\"login__input form__input\" type=\"email\" name=\"email\" placeholder=\"Email\" required />\n                </div>\n                <div className=\"login__input-wrapper form__input-wrapper\">\n                  {(passwordCheck.message && <div>{passwordCheck.message}</div>)}\n                  <label className=\"visually-hidden\">Password</label>\n                  <input className=\"login__input form__input\" type=\"password\" name=\"password\" placeholder=\"Password\" required />\n                </div>\n                <button className=\"login__submit form__submit button\" type=\"submit\">Sign in</button>\n              </form>\n            </section>\n            <section className=\"locations locations--login locations--current\">\n              <div className=\"locations__item\">\n                <Link className=\"locations__item-link\" to={getRoute(AppRoute.DEFAULT_CITY)}>\n                  <span>{AppRoute.DEFAULT_CITY}</span>\n                </Link>\n              </div>\n            </section>\n          </div>\n        </main>\n      </div>\n    </>\n  );\n}\n\nexport default SignIn;\n","/* eslint-disable react/jsx-props-no-spreading */\nimport { ReactElement } from 'react';\nimport { Redirect, Route } from 'react-router';\nimport { PrivateRouteParams } from './types';\n\nexport default function PrivateRoute(\n  { isAuth, authPath, ...routeProps }: PrivateRouteParams,\n): ReactElement {\n  if (isAuth) {\n    return <Route {...routeProps} />;\n  }\n  return <Redirect to={{ pathname: authPath }} />;\n}\n","import { ReactElement } from 'react';\nimport { Switch, Route, BrowserRouter } from 'react-router-dom';\nimport { AppRoute } from '../../const';\nimport { getRoute } from '../../utils/common';\nimport MainPage from '../pages/main';\nimport FavoritesPage from '../pages/favorites';\nimport RoomPage from '../pages/room';\nimport SignInPage from '../pages/sign-in';\nimport NotFoundPage from '../pages/not-found';\nimport PrivateRoute from '../features/private-route';\nimport useLogin from '../../hooks/selectors/use-login';\n\nfunction App(): ReactElement {\n  const { isAuth } = useLogin();\n\n  return (\n    <BrowserRouter>\n      <Switch>\n        <PrivateRoute\n          isAuth={isAuth}\n          authPath={getRoute(AppRoute.LOGIN)}\n          path={getRoute(AppRoute.FAVORITES)}\n        >\n          <FavoritesPage />\n        </PrivateRoute>\n        <PrivateRoute\n          isAuth={!isAuth}\n          authPath={getRoute(AppRoute.MAIN)}\n          path={getRoute(AppRoute.LOGIN)}\n        >\n          <SignInPage />\n        </PrivateRoute>\n        <Route exact path={`${getRoute(AppRoute.OFFER)}/:id`}>\n          <RoomPage isAuth={isAuth} />\n        </Route>\n        <Route exact path={`${getRoute(AppRoute.MAIN)}:city?/:sorting?`}>\n          <MainPage />\n        </Route>\n        <Route>\n          <NotFoundPage />\n        </Route>\n      </Switch>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n","import { StrictMode } from 'react';\nimport { render } from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { store } from './store/reducer';\nimport App from './components/app/app';\n\nrender(\n  <StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}